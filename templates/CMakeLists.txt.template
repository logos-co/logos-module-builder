# CMakeLists.txt template for Logos modules
# Generated by logos-module-builder
#
# Variables to replace:
#   @MODULE_NAME@ - The module name (e.g., my_module)
#   @MODULE_SOURCES@ - List of source files
#   @EXTERNAL_LIBS@ - List of external libraries (optional)
#   @FIND_PACKAGES@ - List of CMake packages to find (optional)
#   @LINK_LIBRARIES@ - Additional libraries to link (optional)
#   @PROTO_FILES@ - Protocol buffer files (optional)

cmake_minimum_required(VERSION 3.14)
project(@MODULE_NAME@ModulePlugin LANGUAGES CXX)

# Include the Logos Module CMake helper
# This can be included from:
# 1. The logos-module-builder nix package
# 2. A local copy in cmake/
# 3. A submodule/vendor directory
set(CMAKE_MODULE_PATH 
    "${CMAKE_MODULE_PATH}"
    "${CMAKE_CURRENT_SOURCE_DIR}/cmake"
    "${CMAKE_CURRENT_SOURCE_DIR}/vendor/logos-module-builder/cmake"
)

# Try to find LogosModule.cmake
if(EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/cmake/LogosModule.cmake")
    include(cmake/LogosModule.cmake)
elseif(DEFINED ENV{LOGOS_MODULE_BUILDER_ROOT})
    include($ENV{LOGOS_MODULE_BUILDER_ROOT}/cmake/LogosModule.cmake)
else()
    # Fallback: download or error
    message(FATAL_ERROR "LogosModule.cmake not found. Please install logos-module-builder or set LOGOS_MODULE_BUILDER_ROOT")
endif()

# Define the module using the helper function
logos_module(
    NAME @MODULE_NAME@
    SOURCES 
        @MODULE_SOURCES@
    # Uncomment and modify as needed:
    # EXTERNAL_LIBS
    #     @EXTERNAL_LIBS@
    # FIND_PACKAGES
    #     @FIND_PACKAGES@
    # LINK_LIBRARIES
    #     @LINK_LIBRARIES@
    # PROTO_FILES
    #     @PROTO_FILES@
)
